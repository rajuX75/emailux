// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    // url      = "file:./dev.db"
    url      = env("DATABASE_URL")
}

model User {
    id             String   @id
    emailAddress   String   @unique
    firstName      String?
    lastName       String?
    imageUrl       String?
    emailVerified  Boolean  @default(false)
    createdAt      DateTime @default(now())
    updatedAt      DateTime @updatedAt
    createdAtClerk DateTime
    updatedAtClerk DateTime
    banned         Boolean  @default(false)
    externalId     String?

    // OAuth related fields
    oauthProvider String?
    oauthId       String? @unique
    oauthScopes   String?

    // Relations
    emails UserEmail[]
}

model UserEmail {
    id                   String   @id
    userId               String
    emailAddress         String   @unique
    verificationStatus   String
    verificationStrategy String
    createdAt            DateTime @default(now())
    updatedAt            DateTime @updatedAt

    // Relations
    user User @relation(fields: [userId], references: [id])

    @@index([userId])
}
